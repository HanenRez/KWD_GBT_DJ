{% extends "base.html" %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/sinan.css' %}">

<div class="sinan-container">

    <!-- Titre du niveau -->
    <h1 class="sinan-title">{{ niveau.personnage }}</h1>

    <!-- Zone superposée décor + personnage -->
    <div class="scene-wrapper">

        <!-- Décor SVG (illustration2) -->
        <div class="decor-layer">
            {% if svg_decor %}
                {{ svg_decor|safe }}
            {% else %}
                <img src="{{ niveau.illustration2.url }}" alt="Décor">
            {% endif %}
        </div>

        <!-- Personnage SVG (illustration) -->
        <div class="perso-layer">
            {% if svg_perso %}
                {{ svg_perso|safe }}
            {% else %}
                <img src="{{ niveau.illustration.url }}" alt="{{ niveau.personnage }}">
            {% endif %}
        </div>

    </div>

    <!-- Zone des activités/animations -->
    <div class="sinan-actions">
        <h2>Animations & activités</h2>

        <div class="actions-list">
            {% for anim in animations %}
                <div class="action-item" onmouseover="playAudio('{{ anim.audio.url }}')">
                    <span class="action-title">{{ anim.titre }}</span>
                    <a href="{{ anim.fichier_svg.url }}" class="action-link" target="_blank">Voir</a>
                </div>
            {% endfor %}
        </div>

    </div>

</div>

<audio id="sinan-player"></audio>

<script>
function playAudio(src) {
    const p = document.getElementById("sinan-player");
    p.src = src;
    p.play().catch(()=>{});
}
</script>

{% endblock %}
